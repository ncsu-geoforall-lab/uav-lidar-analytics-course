<h2>Laboratory experiment: 3D reconstruction from multiple photos</h2>

Perform an experiment to investigate impact of the number and orientation of photos, light, as well as shape and features
of a photographed object on its 3D reconstruction from multiple overlapping imagery.

<p>
Select an object in your office, at home or outside, take multiple overlapping images of this object with your camera
and create its 3D digital model using an appropriate software.
Make sure that you do not change the zoom during the capture (unless you want to test what
impact it would have). You can also compare the models derived from a high end digital camera
and a smart phone.

<p>
Take the photos from various locations and place features on the physical model
to explore the best approach for obtaining a model with minimal distortions.
Use any suitable software for example:
<a href="https://demuc.de/colmap/">Colmap</a> (see below),
<a href="http://remake.autodesk.com/try-remake">ReCap</a> (Windows only) 30-days free trial is available and students can get the software for free for 3 years.
<a href="http://www.regard3d.org/index.php">Regard3D</a> (Windows and Mac) - free and open source software.

For the on-campus students, we have several 3D physical landscape models in the geoviz lab 
that you can use for your experiment.

<p>
<center>
<a href="./img/lab_experiment/Photomodel_012.png">
<img src="./img/lab_experiment/Photomodel_012.png" height=300>
<br>
Example 3D model obtained from 20 photos using catch123 from Autodesk (this software has been discontinued and Autodesk replaced it with ReCap)</a>
<br><a href="./img/lab_experiment/phscan_lrwprop3.jpg">DEM interpolated in GIS from the point cloud exported from 123D Catch</a>
</center>

<h3>Photo capturing guidlines</h3>
<p>Source: <a href="http://www.agisoft.com/pdf/photoscan-pro_1_4_en.pdf">Agisoft Photoscan Professional User Manual</a>, modified</p>
<ul>
<li>Use a digital camera with reasonably high resolution (5 MPix or more);
<li>Avoid ultra-wide angle and fisheye lenses;
<li>Fixed lenses are preferred. If zoom lenses are used - focal length should be set either to maximal or to
minimal value during the entire shooting session for more stable results;
<li>ISO should be set to the lowest value, otherwise high ISO values will induce additional noise to images;
<li>It is important to capture sharp, not blurred photos;
<li>Avoid not textured, shiny, highly reflective or transparent objects;
<li>Avoid unwanted foregrounds;
<li>Avoid moving objects within the scene to be reconstructed;
<li>Avoid absolutely flat objects or scenes;
<li>Number of photos: more than required is better than not enough;
<li>Good  lighting  is  required  to  achieve  better  quality  of  the  results,  yet  blinks  should  be  avoided.  It  is
recommended to remove sources of light from camera fields of view. Avoid using flash;
<li>Each photo should effectively use the frame size: object of interest should take up the maximum area.
In some cases portrait camera orientation should be used;
<li>Do not try to place full object in the image frame, if some parts are missing it is not a problem providing
that these parts appear on other images.
</ul>
<center>
<p>Advice on appropriate capturing scenarios:</p>
<img src="./img/lab_experiment/photo_guidlines1.png" width=50%>
<img src="./img/lab_experiment/photo_guidlines2.png" width=50%>
<img src="./img/lab_experiment/photo_guidlines3.png" width=50%>




<h3>COLMAP</h3>
COLMAP is a general-purpose Structure-from-Motion (SfM) and Multi-View Stereo (MVS) pipeline
with a graphical and command-line interface. COLMAP is open source (GNU GPL) and can be installed on all major platforms.
<p>
Binaries can be downloaded from <a href="https://demuc.de/colmap/">COLMAP website</a>.
<em>Note: Dense reconstruction step requires NVIDIA graphics card with CUDA installed.</em>
Depending on your computer configuration, install binaries with or without CUDA.
Once downloaded, unzip and run COLMAP.bat (on Windows). This should start COLMAP's graphical user interface.

<p>
In this video tutorial (no audio) we upload around 20 images of a scaled physical model to a folder and 
run all steps of the reconstruction pipeline. Notice we can inspect keypoints,
matches and links between cameras and reconstructed points.
<p>
    Note 1: If you don't have CUDA, you need to stop before dense recontruction step.<br>
    Note 2: If you have CUDA, stero reconstruction can crash COLMAP, which is due to so called GPU timeouts;
    More information <a href="https://colmap.github.io/faq.html#fix-gpu-freezes-and-timeouts-during-dense-reconstruction">can be found here</a>
<p>
<iframe width="853" height="480" src="https://www.youtube.com/embed/sHW0f6R0rbI?rel=0"
 frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe>




