<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>GIS595/MEA792: UAV/lidar Data Analytics</title>

        <meta name="description" content="NCSU GIS595/MEA792: UAV/lidar Data Analytics course lecture">
        <meta name="author" content="NCSU OSGeoREL, Mitasova et al.">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/simple.css" id="theme">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">
        <!-- For chalkboard plugin -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

        <!-- If the query includes 'print-pdf', include the PDF print sheet -->
        <script>
            if( window.location.search.match( /print-pdf/gi ) ) {
                var link = document.createElement( 'link' );
                link.rel = 'stylesheet';
                link.type = 'text/css';
                link.href = 'css/print/pdf.css';
                document.getElementsByTagName( 'head' )[0].appendChild( link );
            }
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->

        <style>
        * {
            /*font-family: Verdana, Geneva, sans-serif !important;*/
        }
        body {
        /*background-color: #FFF !important;*/
        /*
          background-image: url("pictures/elevation-nagshead.gif");
          background-repeat: no-repeat;
          background-position: left bottom;*/
        }
        .reveal section img {
            background: transparent;
            border: 0;
            box-shadow: 0 0 0 rgba(0, 0, 0, 0.15);
        }
        /* for standalone frame */
        /*
        iframe {
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        */
        /* display: inline; background-color: #002B36; padding: 0px; margin: 0px */
        .rounded-corners {
            border: 0px solid black;
            border-radius: 5px;
            -moz-border-radius: 5px;
            -khtml-border-radius: 5px;
            -webkit-border-radius: 5px;
        }
        a {
            color: #060 !important;
        }
        a:hover {
            color: #060 !important;
            text-decoration: underline !important;
        }
        h1, h2, h3, h4, h5 {
            text-transform: none !important;
            /* word-break: keep-all; text-transform: none; font-size: 200%; line-height: 110%; */
            color: #060 !important;
            /* color: #444 !important; */ /* grey from the wab page */
            font-weight: bold !important;
            -webkit-hyphens: none !important;
            -moz-hyphens: none !important;
            -ms-hyphens: none !important;
            hyphens: none !important;
            line-height: 110% !important;
        }
        .reveal .progress span {
            background-color: #060 !important;
        }
        /* predefined element positioning */
        .top {
            /*position: relative;*/
            top: 5%;
            height: 45%; /* is the height even needed? */
        }
        .bottom {
            height: 45%;
        }
        .ne {
            position: absolute;
            top: 5%;
            right: 5%;
            height: 45%;
            width: 45%;
        }
        .nw {
            position: absolute;
            top: 5%;
            left: 5%;
            height: 45%;
            width: 45%;
        }
        .se {
            position: absolute;
            bottom: 5%;
            right: 5%;
            height: 45%;
            width: 45%;
        }
        .sw {
            position: absolute;
            bottom: 5%;
            left: 5%;
            height: 45%;
            width: 45%;
        }

        /* classes for sections with predefined elements */
        /* classes for sections with predefined elements */
        .right, .textimg > img, .textimg > video, .textimg > iframe, .imgtext > p, .imgtext > ul, .imgtext > ol, .imgtext > div {
            float: right;
            text-align: left;
            max-width: 47%;
        }
        .left, .imgtext > img, .imgtext > video, imgtext > iframe, .textimg > p, .textimg > ul, .textimg > ol, .textimg > div {
            float: left;
            text-align: left;
            max-width: 47%;
        }
        li > ul, li > ol {
            font-size: 85% !important;
            line-height: 110% !important;
        }
        .small {
            font-size: smaller !important;
            color: black;
            margin: 0.1em !important;
        }
        .credit {
            font-size: small !important;
            color: gray;
            margin: 0.1em !important;
        }
        .parent-page {
            display: inline-block;
            position: absolute;
            right: 30px;
            bottom: 30px;
            top: auto;
            left: auto;
            z-index: 30;
            font-size: medium !important;
        }
        </style>
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
<!-- This is a generated file. Do not edit. -->
<section>
    <h2>UAS and lidar data: comparison, fusion, and analysis</h2>
    <h4>GIS595-004/603; MEA592-006/601:</h4>
    <h4>UAS Mapping for 3D Modeling</h4>
    <h4 style="margin-top: 0.5em">
    Helena Mitasova, Anna Petrasova, Justyna Jeziorska</h4>
    <p class="title-foot">
        <a href="http://geospatial.ncsu.edu/" title="Center for Geospatial Analytics">Center for Geospatial Analytics,</a>
       <br> <a href="http://www.ncsu.edu/" title="North Carolina State University">North Carolina State University</a>
    </p>
</section>

<section>
    <h3>Outline</h3>
<p>
<ul>
 <p><li>Motivation for combining lidar and UAS SfM data
 <p><li>Analysis of lidar and UAS SfM DSMs differences
 <p><li>Patching and smooth fusion of UAS and lidar DSM
 <p><li>Overland flow simulation on fused DEM
</ul>
</section>

<!--
<section>
    <h2>UAS Photogrammetric process</h2>
     <img class="fragment" src="img/plan/photogrammetric_process.png">
<p class="fragment">Throughout the whole process, it is important to remember</p>
    <ul>

        <li class="fragment"><strong>What</strong> is the aim or the project? and </li>
        <li class="fragment"><strong>What</strong> will be the data used for?</li>
    </ul>
</section>
-->

<section>
   <h3>Point clouds from lidar</h3>
<ul>
   <li class="fragment">measured variable is time of return for each pulse</li>
   <li class="fragment">georeferencing is based on the position (measured by GPS) and exterior orientation (measured by inertial navigation system INS) of the platform</li>
   <li class="fragment">(x,y,z) is derived from time, GPS positioning and INS parameters</li>
</ul>
<p><img  height="250" class="fragment" src="img/lidar/midpines_lidar_plasviewcozoom.jpg"></p>
</section>

<section>
   <h3>Point clouds from SfM</h3>
<ul>
    <li class="fragment">measured variable is reflected energy captured as imagery</li>
    <li class="fragment">georeferencing can be done entirely from GCPs </li>
    <li class="fragment">(x, y, z) is derived from overlapping images and GCPs</li>
    <li class="fragment">alternatively: GPS and INS for position and orientation of images and camera parameters</li>
</ul>
<p><img  height="250" class="fragment" src="img/lidar/midpines_uas_plasviewco2.jpg"></p>
</section>

<section>
   <h3>Comparison of point cloud properties</h3>
<ul>
<li>Airborne Lidar: 
  <ul>
  <li class="fragment">passes through vegetation,multiple return, 
  <li class="fragment">shifts between swaths, cordurroy effect
  <li class="fragment">regional coverage  
  <li class="fragment">high cost
  </ul>
<p>
<li>
UAS SfM: 
  <ul>
  <li class="fragment">very high point density, 
  <li class="fragment">limited capability to map under vegetation
  <li class="fragment">influenced by cast shadows, 
  <li class="fragment">low cost, but limited area 
  </ul>
</ul>
<p class="fragment">
Different distribution of errors and distortions:
Lidar and SfM provide independent set of measurements. 
</p>
</section>

<section>
 <h3>Motivation for lidar and UAS SfM fusion</h3>
<ul>
  <li class="fragment">low cost DEM updates in rapidly changing landscapes - e.g. construction sites
  <li class="fragment">replacing vegetated areas in UAS SfM by bare ground 
  <li class="fragment">watershed analysis when only part of the watershed was mapped by UAS
  <li class="fragment">improve accuracy and level of detail over stable features (buildings, bridges)
  <li class="fragment">add your suggestion  
</ul>
<!--<p><img  height="200" class="fragment" src="img/lidar/midpines_uas_plasviewco2.jpg"></p>CC midle school-->
</section>

<section>
 <h3>Fusion techniques</h3>
<ul>
 <li class="fragment">merge the point clouds, decimate or bin at high resolution, interpolate: computationally demanding 
 <li class="fragment">interpolate DEMs, randomly sample, patch, and reinterpolate: loss of detail, time consuming
 <li class="fragment">interpolate DEMs and patch: sharp edges
 <li class="fragment">smooth fusion - requires DEMs at same resolution
</ul>
</section>

<section>
 <h3>Workflow</h3>
<ul>
 <li>evaluate the point clouds, select resolution
 <li>interpolate lidar and UAS DEMs at the same resolution
<p>
 <li>evaluate the differences between the lidar and UAS DEMs
 <li>if applicable, identify errors and apply corrections
 <li>apply smooth fusion
</ul>
</section>

<section>
   <h3>Identify distortions due to processing</h3>
<ul>
 <li>identify spatial pattern of distortions
 <li>difference maps between Lidar DSM and UAS SfM DSMs: 
different distortions from AGISOFT and PIX4D
</ul>
<p>
<img width="40%" src="img/fusion_lidar_uav/dif_lid_agi_junesh.jpg">
<img width="40%" src="img/fusion_lidar_uav/dif_lid_pix4d_junesh.jpg">
</section>

<section>
   <h3>Identify changes in topography</h3>
<ul>
 <li>vegetation growth or removal
 <li>change in elevation surface due to erosion processes
 <li>UAS SFM - lidar difference maps with custom color
</ul>
<p>
<img width="40%" src="img/fusion_lidar_uav/diff_lid_uavGCPjune.jpg">
<!--<img width="25%" src="img/fusion_lidar_uav/diff_lid_uavGCPjune_gully.jpg">-->
<img width="28%" src="img/fusion_lidar_uav/field_rill_photo.jpg">
</section>

<section>
   <h3>Comparing profiles: fields</h3>
<ul>
<li>identify systematic errors (vertical shifts) 
<li>differences due to vegetation growth, erosion/deposition
</ul>
<img width="100%" src="img/fusion_lidar_uav/Anna_profile_fields.jpg">
</section>

<section>
   <h3>Comparing profiles: building</h3>
<p>
<ul>
<li>high accuracy, lower level of detail in lidar data
<li>negligible systematic error
</ul>
<p>
<br>
<img width="100%" src="img/fusion_lidar_uav/Anna_profile_house.jpg">
</section>

<section>
   <h3>Comparing profiles: road</h3>
<p>
<ul>
<li>relatively, easy to identify, stable feature 
<li>high accuracy - differences between lidar and UAS SfM within 4cm 
</ul>
<p>
<img width="90%" src="img/fusion_lidar_uav/subregion_road_profile_2.png">
</section>

<section>
   <h3>Correct for systematic error and distortions</h3>
<p>
<ul>
<li>systematic error - if due to GPS shift, use median difference
<li>systematic error - if tilt, use regression function
<li>most challenging are complex UAS SfM distortions - they can be reduced using interpolated GCP differences
or differencing with lidar 
<li>importance of well distributed, accurate GCPs 
</ul>
</section>

<section>
   <h3>Updating lidar DSM by patching</h3>
<p>
<ul>
<li>replace the grid cells in the updated area by UAS DSM
<li>averaging over an overlap
<li>usually creates an edge - can be post-processed
</ul>
<p>
<img width="45%" src="img/fusion_lidar_uav/Brendaninitial_fusion.png">
<img width="45%" src="img/fusion_lidar_uav/Brendaninitial_fusion_relief.png">
<p class="credit">images by Brendan Harmon</p>
</section>

<section>
   <h3>Updating lidar DSM by patching</h3>
<p>
<ul>
<li>edge between lidar and UAS SfM DEMs  
</ul>
<p>
<img width="95%" src="img/fusion_lidar_uav/patchingedge.png">
</section>

<section>
   <h3>Smooth fusion</h3>
<p>
<ul>
<li>derive overlap raster
<li>weighted smoothing based on the distance from the edge
</ul>
<p>
<img width="45%" src="img/fusion_lidar_uav/Anna_patching.jpg">
<img width="45%" src="img/fusion_lidar_uav/Anna_fusion.jpg">
</section>

<section>
<h2>Fusion method</h2>
<p style="text-align:left;font-size:90%">
    Linear combination of elevation surfaces $z_{A}$ and $z_{B}$
    with weights given by overlap width $s$ and distance $d$ to the edge of $z_{A}$:
<div class="left" style="max-width:54% !important">
    <p style="font-size:80%">
        $$
        z_{AB} = z_{A} w + z_{B}(1 - w),
    \\[10pt]
        w = f(s, d) =
        \begin{cases} 
              \frac{d}{s} & 0 \leq d < s \\
              1 & d \geq s
        \end{cases}
        $$
</div>
<img class="right" src="img/fusion_lidar_uav/schema2.png" style="max-width:45% !important">
</section>
<section>
    <h2>Influence of overlap width $s$</h2>
    <img width="100%" src="img/fusion_lidar_uav/sm_all.png">
</section>

<section class="textimg">
    <h2>Fusion with spatially variable $s$</h2>
    <div style="max-width:50% !important">
    <p style="font-size:90%"> By taking into account spatially variable differences <span class="mexpr">$\Delta z$</span>
        between DEMs <span class="mexpr">$A$</span> and <span class="mexpr">$B$</span> along the overlap:
        <ul class="pl">
            <li>we get more gradual transition where differences are high</li>
            <li>we preserve subtle features of both DEMs where differences are small</li>
        </ul>
    </div>
    <br>
    <img src="img/fusion_lidar_uav/schema3.png" style="max-width:47% !important">

</section>

<section>
    <h2>Fusion with spatially variable $s$</h2>
        <img class="stretch" src="img/fusion_lidar_uav/fusionv2.png">
</section>

<section>
    <h3>Lidar and UAS SfM patching and fusion</h3>
        <img width="48%" src="img/fusion_lidar_uav/assignment_patched.jpg">
        <img width="48%" src="img/fusion_lidar_uav/assignment_fused.jpg">
        <p style="font-size:80%">
            Simply patched vs. fused UAS and lidar DSMs with overlap width $s = 20\ m$
</section>
<section>
    <h3>Fusing vegetated patch with bare ground</h3>
        <img width="48%" src="img/fusion_lidar_uav/assignment_uas_ground.jpg">
        <img width="48%" src="img/fusion_lidar_uav/assignment_fused_ground.jpg">
        <p style="font-size:80%">
            UAS-derived DSM's vegetated parts replaced with lidar DEM.
</section>

<section>
    <h3>Spatially variable overlap</h3>
        <img width="48%" src="img/fusion_lidar_uav/assignment_overlap.jpg">
        <p style="font-size:80%">
           Spatially variable overlap for UAS SfM and lidar fusion based on elevation differences
</section>

<section>
    <h3>Modeling overland flow</h3>
<p>Microtopography captured at ultrahigh resolution by UAS SFM poses special challenges to flow routing:
<ul>
  <li>real depressions are important features
  <li>complex pattern of ponding, overflow of barriers is not supported by standard tools
  <li>noisy surface requires robust algorithm
</ul>
</section>

<section>
    <h3>Path sampling method</h3>
<p>Stochatistic method for solving flow continuity equations
        <img width="48%" src="img/fusion_lidar_uav/fanimwalk.gif">
        <img width="48%" src="img/fusion_lidar_uav/fanimhhcolp.gif">
</section>

<section>
    <h3>Flow over UAS mapped field</h3>
<img width="68%" src="img/fusion_lidar_uav/agisoft_june.gif">
<p>Crop surface creates barrier leading to artificial ponding

</section>

<section>
    <h3>Flow over patched DEMs</h3>
<p>
<img width="48%" src="img/fusion_lidar_uav/problem_water_scale.png">
<img width="48%" src="img/fusion_lidar_uav/problem_solution_man_scale.png">
<p>Replacing crop surface by lidar bare ground: patching creates artificial flow pattern, 
smooth fusion improves accuracy of flow distribution 
</section>

<section>
    <h2>Examples from assignment</h2>
        <img width="48%" src="img/fusion_lidar_uav/assignment_flow_patched.jpg">
        <img width="48%" src="img/fusion_lidar_uav/assignment_flow_smooth_patched.jpg">
        <p style="font-size:80%">
            Water flow on DSM created by simple patching vs. smooth patching
</section>

<section>
    <h2>Examples from assignment</h2>
        <img width="48%" src="img/fusion_lidar_uav/assignment_flow_smooth_patched.jpg">
        <img width="48%" src="img/fusion_lidar_uav/assignment_flow_ground.jpg">
        <p style="font-size:80%">
            Water flow on DSM vs. bare ground fused from UAS DSM and lidar DEM
</section>

<!-- Python -->
<section>
    <h2>Intro to Python in GRASS GIS</h2>
</section>
<section>
    <h2>Motivation</h2>
    <div class="fragment" >
    <p style="text-align:left">What is scripting good for?
        <ul><li>running tasks and workflows repeatedly on many datasets</li>
            <li>sharing your workflow with colleagues</li>
            <li>making your work reproducible (for your own benefit)</li>
        </ul></div><div class="fragment" >
    <p style="text-align:left">Why Python?
        <ul><li>most widely used language in geospatial applications</li>
            <li>easy to learn</li>
            <li>active community, many libraries</li>
        </ul></div>
</section>
<section>
    <h2>Running Python in GRASS</h2>
    <img class="stretch" src="img/python_editor.png">
    <p>Python shell for one-line statements, editor for  scripts
</section>

<section>
    <h2>GRASS Python Scripting Library</h2>
    <ul>
    <li>Enables to run GRASS GIS modules</li>
    <li>Import:
    <pre><code data-trim class="python">
        import grass.script as gs
	</code></pre></li>
    <li><strong>run_command:</strong> most commonly used, for modules without text output, with raster/vector output
    <pre><code data-trim class="python">
gs.run_command('g.region', raster='elevation')
gs.run_command('r.neighbors', input='elevation',
               output='elev_smoothed',
               method='average', flags='c')
    </code></pre></li>
    <li>Compare to GRASS command line syntax:
        <pre><code data-trim class="nohighlight">
g.region raster=elevation
r.neighbors input=elevation output=elev_smoothed method=average -c
        </code></pre>
    </li>
</ul>
</section>

<section>
    <h2>GRASS Python Scripting Library</h2>
    <ul>
    <li><strong>read_command:</strong> used when we are interested in text output
    <pre><code data-trim class="python">
gs.read_command('r.univar', map='elev_smoothed', flags='g')
    </code></pre>
    <pre>
n=1142647
null_cells=207394
cells=1350041
min=110.196601867676
max=128.924560546875
...
</pre></li></ul>
</section>

<section>
    <h2>GRASS Python Scripting Library</h2>
    <ul>
    <li><strong>parse_command:</strong> used with modules producing text output as key=value pair
    <pre><code data-trim class="python">
gs.parse_command('r.univar', map='elev_smoothed', flags='g')
    </code></pre>
    <pre>
{'min': '110.1966018', 'max': u'128.9245605', 'cells': u'1350041', ...}
</pre>
<br>
Allows convenient access to variable in dictionary:
<pre><code data-trim class="python">
gs.parse_command('r.univar', map='elev_smoothed', flags='g')['range']
</code></pre>
<pre>
18.72795867
</pre></li></ul>
</section>

<section>
    <h2>GRASS Python Scripting Library</h2>
    <ul>
    <li><strong>write_command:</strong> for modules expecting text input from either standard input or file
    <pre><code data-trim class="python">
gs.write_command('v.in.ascii', input='-',
                 stdin='%s|%s' % (635818.8, 221342.4),
                 output='view_point')
    </code></pre>
</ul>
</section>

<section>
    <h2>GRASS Python Scripting Library</h2>
    <ul>
    <li>Other functions: calling r.mapcalc
    <pre><code data-trim class="python">
gs.mapcalc("elev_strip = if(elevation > 100 && elevation < 125,
            elevation, null())")
    </code></pre>
</ul>
</section>

<!-- 
<section>
   <h3>Viewsheds</h3>
<p>
<ul>
<li>provide analysis to support siting of a monitoring webcam
<li>evaluate influence on using different DSMs on the viewshed extent
</ul>
<p>
<img height="400" src="img/fusion_lidar_uav/Anna_viewshed.jpg">
</section> -->

<!--
<section>
   <h3>Lidar data sources</h3>
<p>
Public data sources (http in Summary slide):
<ul>
  <li>CLICK: raw point clouds usually in LAS format
  <li>NOAA Digital Coast: costal point clouds with on-fly binning
  <li>NC Floodplain Mapping: bare Earth: points, 20ft DEM and 50ft DEM with carved channels
  <li>NC data portal
  <li>OpenTopography: NCALM data
</ul>
<p>more about lidar in GRASS at http://grasswiki.osgeo.org/wiki/LIDAR
</section>
-->


<div class="parent-page">
    <!-- &#x1f3e0; -->
    <a href="../topics/fusion_uas_lidar.html" title="Go to the topic page">&#8962;</a>
</div>
        </div>  <!-- slides -->

    </div>  <!-- reveal -->

    <!--
        Home button or link to a parent page
        If you want this to be unique for every page (slide deck),
        then remove it from here and put it at the end of each
        file (or series of files) creating one page
        (the position will be little different)
        TODO: some JS is needed to move it to the right position
    -->
    <div class="parent-page">
        <!-- alternative symbol: &#x1f3e0; -->
        <a href=".." title="Course website">
            <img width="15px" src="img/home.svg"></a>
    </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                // Display controls in the bottom right corner
                controls: false,

                // Display a presentation progress bar
                progress: true,
                
                center: true,
                
                // Display the page number of the current slide
                slideNumber: false,

                // Enable the slide overview mode
                overview: true,

                // Turns fragments on and off globally
                fragments: true,

                // The "normal" size of the presentation, aspect ratio will be preserved
                // when the presentation is scaled to fit different resolutions. Can be
                // specified using percentage units.
                // width: 960,
                // height: 700,
                
                // Factor of the display size that should remain empty around the content
                margin: 0.05,  // increase?

                // Bounds for smallest/largest possible scale to apply to content
                minScale: 0.5,
                maxScale: 5.0,

                theme: Reveal.getQueryHash().theme,  // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'none', // default/cube/page/concave/zoom/linear/fade/none

                // Push each slide change to the browser history
                history: true,
                // Enable keyboard shortcuts for navigation
                keyboard: true,

                // Vertical centering of slides
                center: true,

                // Enables touch navigation on devices with touch input
                touch: true,

                // Loop the presentation
                loop: false,
                // Flags if the presentation is running in an embedded mode,
                // i.e. contained within a limited portion of the screen
                embedded: false,

                // Number of milliseconds between automatically proceeding to the
                // next slide, disabled when set to 0, this value can be overwritten
                // by using a data-autoslide attribute on your slides
                autoSlide: 0,

                // Stop auto-sliding after user input
                autoSlideStoppable: true,

                // Enable slide navigation via mouse wheel
                mouseWheel: false,

                // Hides the address bar on mobile devices
                hideAddressBar: true,

                // Opens links in an iframe preview overlay
                previewLinks: false,

                // Transition speed
                transitionSpeed: 'default', // default/fast/slow

                // Transition style for full page slide backgrounds
                backgroundTransition: 'none', // default/none/slide/concave/convex/zoom

                // Number of slides away from the current that are visible
                viewDistance: 3,

                // Parallax background image
                //parallaxBackgroundImage: '', // e.g. "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'"

                // Parallax background size
                //parallaxBackgroundSize: '' // CSS syntax, e.g. "2100px 900px"
                chalkboard: {
                // optionally load pre-recorded chalkboard drawing from file
                    src: "chalkboard.json",
			    },
                math: {
                        mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
                        config: 'TeX-AMS_HTML-full'  // See http://docs.mathjax.org/en/latest/config-files.html
                },
                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/math/math.js', async: true },
                    { src: 'plugin/chalkboard/chalkboard.js' }
                ],
                keyboard: {
                    67: function() { RevealChalkboard.toggleNotesCanvas() },	// toggle notes canvas when 'c' is pressed
                    66: function() { RevealChalkboard.toggleChalkboard() },	// toggle chalkboard when 'b' is pressed
                    46: function() { RevealChalkboard.clear() },	// clear chalkboard when 'DEL' is pressed
                    8: function() { RevealChalkboard.reset() },	// reset chalkboard data on current slide when 'BACKSPACE' is pressed
                    68: function() { RevealChalkboard.download() },	// downlad recorded chalkboard drawing when 'd' is pressed
                }
            });

        </script>
    </body>
</html>
